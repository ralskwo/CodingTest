# 제곱수 찾기 문제 풀이 및 설명

https://www.acmicpc.net/problem/1025

## 문제 이해

이 문제는 N x M 크기의 표에 적힌 숫자들을 사용하여 가능한 모든 수를 만들어내고, 그 중에서 가장 큰 완전 제곱수를 찾아내는 문제입니다. 여기서 완전 제곱수란 어떤 자연수의 제곱으로 나타낼 수 있는 수를 말합니다. 예를 들어, 4, 9, 16, 25 등은 모두 완전 제곱수입니다. 문제를 해결하기 위해서는 표의 각 위치에서 출발하여 다양한 방향으로 숫자를 이어붙여 보고, 그 숫자들 중에서 완전 제곱수인지 판별한 뒤, 가능한 최대값을 찾는 것이 목표입니다. 이 과정에서 주의할 점은, 완전 제곱수를 만들 수 없는 경우에는 -1을 출력해야 한다는 것입니다.

## 입출력 조건

**입력 조건**:
1. 첫 번째 줄에 표의 크기를 나타내는 두 정수 N과 M이 주어집니다. (1 ≤ N, M ≤ 9)
2. 그 다음 N개의 줄에 걸쳐 M개의 숫자가 공백 없이 주어집니다. 이 숫자들은 0부터 9 사이의 숫자들입니다.

**출력 조건**:
1. 가능한 모든 숫자 중 가장 큰 완전 제곱수를 출력합니다. 만약 완전 제곱수를 만들 수 없다면 -1을 출력합니다.

## 접근 방식

이 문제를 해결하기 위해서는 다음과 같은 알고리즘과 방식을 사용할 수 있습니다:

1. **가능한 모든 숫자 생성**: 표에서 가능한 모든 위치에서 출발하여 여러 방향으로 숫자를 이어붙이는 방법을 고려해야 합니다. 각 셀에서 시작하여 상하좌우, 대각선 방향으로 숫자를 이어 붙일 수 있으며, 이동 거리는 1칸뿐만 아니라 여러 칸이 될 수 있습니다.

2. **완전 제곱수 판별**: 생성된 숫자들이 완전 제곱수인지 판별하는 함수를 구현해야 합니다. 이는 숫자의 제곱근을 계산한 후, 그 제곱근을 다시 제곱했을 때 원래 숫자와 동일한지 확인하는 방식으로 구현할 수 있습니다.

3. **최대값 갱신**: 만들어진 숫자들 중 완전 제곱수인 것들을 찾고, 그 중에서 가장 큰 값을 갱신하는 과정을 반복합니다. 이 과정에서 완전 제곱수를 찾지 못한 경우에는 -1을 출력하는 처리가 필요합니다.

## 풀이 과정

1. **입력 데이터 처리**: N과 M을 입력받은 후, 표에 적힌 숫자들을 리스트 형태로 저장합니다.

2. **완전 제곱수 판별 함수 구현**: 숫자가 완전 제곱수인지 여부를 판별하는 함수를 구현합니다. 주어진 숫자의 제곱근을 계산한 후, 그 제곱근을 다시 제곱해 원래의 숫자와 일치하는지 확인합니다.

3. **가능한 모든 숫자 생성**: 각 셀에서 출발하여 모든 방향으로 가능한 모든 숫자를 생성합니다. 이는 반복문을 사용해 각 방향으로 이동하며 숫자를 이어붙이는 방식으로 구현할 수 있습니다. 이때 이동 방향이 0,0인 경우는 숫자를 생성할 수 없으므로 제외해야 합니다.

4. **완전 제곱수 최대값 갱신**: 생성된 숫자 중 완전 제곱수인 것들을 확인하고, 그 중에서 가장 큰 값을 저장합니다. 이 과정을 모든 셀에 대해 반복합니다.

5. **결과 출력**: 완전 제곱수를 찾았다면 그 중에서 가장 큰 값을 출력하고, 그렇지 않다면 -1을 출력합니다. 이 과정에서 최대값 갱신이 이루어지지 않은 경우, 즉 완전 제곱수가 하나도 생성되지 않은 경우를 체크하는 것이 중요합니다.

이와 같은 순서로 문제를 해결할 수 있으며, 이러한 접근 방식을 통해 가능한 최적의 답을 도출할 수 있습니다.

## 코드 구현
```python
import math  # 수학 모듈을 불러옵니다. 이 모듈은 제곱근 계산에 사용됩니다.

N, M = map(int, input().split())  # N과 M을 입력받고 정수로 변환합니다.
table = [input().strip() for _ in range(N)]  # 표의 각 행을 입력받아 리스트로 저장합니다.

def is_perfect_square(num):  # 숫자가 완전 제곱수인지 확인하는 함수입니다.
    if num < 0:  # 음수는 완전 제곱수가 될 수 없으므로 False를 반환합니다.
        return False
    root = int(math.isqrt(num))  # num의 제곱근을 계산한 후 정수로 변환합니다.
    return root * root == num  # 제곱근의 제곱이 num과 같으면 완전 제곱수이므로 True를 반환합니다.

max_square = -1  # 최대 완전 제곱수를 저장할 변수를 초기화합니다.

for i in range(N):  # 모든 행에 대해 반복합니다.
    for j in range(M):  # 모든 열에 대해 반복합니다.
        for di in range(-N, N):  # 행 방향으로 가능한 모든 이동 거리를 설정합니다.
            for dj in range(-M, M):  # 열 방향으로 가능한 모든 이동 거리를 설정합니다.
                if di == 0 and dj == 0:  # 이동 거리가 0,0이면 숫자를 만들 수 없으므로 건너뜁니다.
                    continue
                x, y = i, j  # 시작 위치를 현재 위치로 설정합니다.
                num_str = ""  # 숫자를 이어 붙일 문자열 변수를 초기화합니다.
                while 0 <= x < N and 0 <= y < M:  # 위치가 유효한 범위 내에 있는 동안 반복합니다.
                    num_str += table[x][y]  # 현재 위치의 숫자를 num_str에 추가합니다.
                    num = int(num_str)  # num_str을 정수로 변환합니다.
                    if is_perfect_square(num):  # num이 완전 제곱수인지 확인합니다.
                        max_square = max(max_square, num)  # 현재까지의 최대 완전 제곱수와 비교해 더 큰 값을 저장합니다.
                    x += di  # 행 방향으로 이동합니다.
                    y += dj  # 열 방향으로 이동합니다.

print(max_square)  # 찾은 최대 완전 제곱수를 출력합니다. 만약 완전 제곱수를 찾지 못했다면 -1이 출력됩니다.
