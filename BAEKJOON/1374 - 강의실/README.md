# 강의실 문제 풀이 및 설명

<https://mayquartet.com/python-백준-1374-강의실/>

<https://www.acmicpc.net/problem/1374>

## 문제 이해

이 문제는 강의실 배정을 최적화하는 문제로, 여러 개의 강의가 주어진 상황에서 최소한의 강의실 개수로 모든 강의를 진행해야 합니다. 여기서 중요한 점은, 한 강의실에서는 동시에 두 개 이상의 강의를 진행할 수 없다는 제한 조건입니다. 그러나 한 강의의 종료 시간과 다른 강의의 시작 시간이 정확히 겹치는 경우에는 동일한 강의실을 사용할 수 있습니다.

이 문제를 해결하기 위해서는 각 강의의 시작 시간과 종료 시간을 기준으로 정렬하고, 강의실을 효율적으로 관리할 수 있는 데이터 구조를 사용해야 합니다. 문제를 해결하기 위한 핵심은 **시간 관리**입니다. 시작 시간과 종료 시간을 비교하며, 가능한 기존 강의실을 재사용하거나 새로운 강의실을 추가로 배정해야 합니다.

## 입출력 조건

### 입력

1. 첫 번째 줄에는 강의 개수 `N`이 주어집니다. `N`은 1 이상 100,000 이하입니다.
2. 두 번째 줄부터 `N`개의 줄에 걸쳐 각 줄에는 세 개의 정수로 이루어진 강의 정보가 주어집니다. 각각 강의 번호, 강의 시작 시간, 강의 종료 시간을 나타냅니다.
3. 강의 번호는 1부터 `N`까지의 정수로 주어지며, 입력 순서가 보장되지는 않습니다.
4. 강의의 시작 시간과 종료 시간은 0 이상 10억 이하의 정수이며, 시작 시간은 종료 시간보다 작습니다.

### 출력

- 모든 강의를 진행하는 데 필요한 최소 강의실의 개수를 한 줄로 출력합니다.

## 접근 방식

이 문제는 **그리디 알고리즘**과 **우선순위 큐**를 활용하여 해결할 수 있습니다. 강의실의 사용을 최소화하기 위해 다음과 같은 접근 방식을 사용해야 합니다:

1. **정렬**

   - 먼저 강의의 시작 시간을 기준으로 오름차순 정렬합니다. 시작 시간이 동일하다면 종료 시간이 빠른 순서로 정렬합니다. 이는 강의 배정을 순서대로 진행하기 위해 필요합니다.

2. **우선순위 큐(min-heap)**

   - 강의실의 종료 시간을 관리하기 위해 우선순위 큐를 사용합니다. 큐의 맨 앞에 있는 값은 가장 빠르게 종료되는 강의의 종료 시간을 나타냅니다.
   - 현재 강의의 시작 시간이 큐에서 가장 빠른 종료 시간보다 크거나 같으면 해당 강의실을 재사용합니다. 그렇지 않으면 새로운 강의실을 추가합니다.

3. **필요한 최소 강의실 개수 계산**
   - 우선순위 큐에 저장된 값의 개수는 현재 사용 중인 강의실의 수를 나타냅니다. 이를 통해 최소 강의실 개수를 구할 수 있습니다.

이 접근 방식은 강의의 개수 `N`이 매우 클 때도 효율적으로 동작하며, 정렬에 `O(N log N)`의 시간 복잡도를 사용하고, 우선순위 큐의 삽입과 삭제 연산에 대해 각각 `O(log N)`의 시간 복잡도를 가집니다.

<https://mayquartet.com/algorithm-알고리즘-greedy-그리디-알고리즘탐욕법-이해하기/>

## 풀이 과정

1. **강의 정보 입력**

   - 강의 개수 `N`과 각 강의의 시작 시간, 종료 시간을 입력받아 리스트에 저장합니다. 이때 강의 번호는 문제 해결에 필요하지 않으므로 무시합니다.

2. **강의 정렬**

   - 강의 리스트를 시작 시간 기준으로 오름차순 정렬합니다. 시작 시간이 같다면 종료 시간을 기준으로 정렬됩니다. 이를 통해 강의를 시간 순서대로 처리할 수 있습니다.

3. **우선순위 큐 생성**

   - 강의실의 종료 시간을 관리하기 위해 빈 우선순위 큐(min-heap)를 생성합니다.

4. **강의 배정**

   - 정렬된 강의 리스트를 순회하며 다음 과정을 반복합니다:
     - 현재 강의의 시작 시간이 우선순위 큐의 최상단 값(가장 빠른 종료 시간)보다 크거나 같으면, 기존 강의실을 재사용할 수 있습니다. 이 경우, 큐에서 해당 값을 제거합니다.
     - 새로운 강의의 종료 시간을 큐에 추가합니다. 이는 현재 강의실의 종료 시간을 나타냅니다.

5. **결과 계산**
   - 순회가 끝난 후, 우선순위 큐에 남아 있는 값의 개수가 최소한의 강의실 개수를 나타냅니다. 이를 출력합니다.

## 코드 구현

```python
import heapq
import sys

# 입력을 빠르게 처리하기 위해 sys.stdin.read 사용
input = sys.stdin.read
data = input().splitlines()

# 첫 줄에서 강의 개수 N 입력 받기
N = int(data[0])

# 강의 정보를 저장할 리스트 선언
lectures = []

# 두 번째 줄부터 각 강의의 번호, 시작 시간, 종료 시간을 읽어서 리스트에 저장
for i in range(1, N + 1):
    _, start, end = map(int, data[i].split())
    lectures.append((start, end))

# 강의 시작 시간을 기준으로 정렬
# 시작 시간이 동일할 경우 종료 시간이 빠른 순서로 정렬됨
lectures.sort()

# 최소 종료 시간을 저장할 우선순위 큐 생성
min_heap = []

# 강의 정보를 순회하며 강의실 배정
for start, end in lectures:
    # 현재 강의의 시작 시간이 기존 강의실 중 가장 빨리 끝나는 강의의 종료 시간 이후라면
    if min_heap and min_heap[0] <= start:
        # 강의실을 재사용하므로 우선순위 큐에서 해당 종료 시간을 제거
        heapq.heappop(min_heap)
    # 현재 강의의 종료 시간을 우선순위 큐에 추가
    heapq.heappush(min_heap, end)

# 최종적으로 우선순위 큐에 남아있는 요소의 개수가 필요한 최소 강의실 개수
print(len(min_heap))
```
