# 연료 채우기 문제 풀이 및 설명

https://www.acmicpc.net/problem/1826

## 문제 이해

이 문제는 트럭을 운전하여 정글을 지나 목적지까지 도달하는 과정에서 필요한 최소한의 주유 횟수를 구하는 것입니다. 트럭은 주행 도중 연료 탱크에 구멍이 나서 1km당 1L의 연료가 새어나갑니다. 주유소에서 연료를 채워야만 목적지까지 도달할 수 있으며, 주유소마다 위치와 채울 수 있는 연료량이 다릅니다. 목표는 도착지까지 가는 도중 최소한으로 주유소에 들러 연료를 채우는 것입니다.

## 입력 조건

- 첫 번째 줄에 주유소의 개수 \( N \) (1 ≤ \( N \) ≤ 10,000)이 주어집니다.
- 다음 \( N \)개의 줄에 각 주유소의 위치 \( a \) (1 ≤ \( a \) < 1,000,000)와 주유소에서 채울 수 있는 연료량 \( b \) (1 ≤ \( b \) ≤ 100)가 주어집니다.
- 그 다음 줄에 목적지까지의 거리 \( L \) (1 ≤ \( L \) ≤ 1,000,000)와 처음 트럭에 들어 있는 연료의 양 \( P \) (1 ≤ \( P \) ≤ 1,000,000)가 주어집니다.

## 출력 조건

- 첫 번째 줄에 주유소에서 멈추는 최소 횟수를 출력합니다.
- 만약 목적지에 도착할 수 없다면 -1을 출력합니다.

## 접근 방식

이 문제는 '최소 힙'을 사용하여 해결할 수 있는 문제로, 그리디 알고리즘과 우선순위 큐(최대 힙)를 활용해야 합니다. 현재 연료로 이동 가능한 최대 거리에 도달할 때까지, 그 지점에 도달할 수 있도록 도와줄 수 있는 주유소 중 가장 많은 연료를 제공하는 주유소를 선택하여 연료를 채우는 방식입니다. 이 과정을 통해 주유 횟수를 최소화할 수 있습니다.

구체적으로 다음과 같은 방식으로 접근합니다:

1. 주유소의 위치를 기준으로 정렬합니다.
2. 현재 위치에서 이동 가능한 최대 거리에 도달할 때까지, 도달할 수 있도록 도와줄 수 있는 주유소 중 가장 많은 연료를 제공하는 주유소를 선택합니다.
3. 우선순위 큐(최대 힙)를 사용하여, 현재 위치에서 이동 가능한 주유소를 추적하고, 필요 시 가장 많은 연료를 제공하는 주유소를 선택하여 연료를 채웁니다.
4. 이 과정을 반복하여 목적지에 도달할 수 있는지 확인합니다.

## 풀이 과정

1. **입력 처리 및 초기화**: 
    - 주유소의 위치와 연료량을 입력받고, 목적지의 거리와 초기 연료량을 입력받습니다.
    - 주유소 리스트에 목적지 정보를 추가하고, 주유소를 위치 기준으로 정렬합니다.

2. **알고리즘 적용**:
    - 현재 연료량을 가지고 도달할 수 있는 거리까지 이동합니다.
    - 도달할 수 없는 경우, 이전에 방문한 주유소 중 가장 많은 연료를 제공하는 주유소를 선택하여 연료를 채웁니다.
    - 이를 우선순위 큐(최대 힙)를 사용하여 가장 많은 연료를 제공하는 주유소를 효율적으로 선택합니다.

3. **연료 채우기**:
    - 이동할 때마다 현재 위치와 주유소의 위치를 비교하여 연료를 소비합니다.
    - 이동할 수 없는 경우, 우선순위 큐에서 연료를 채워 목적지까지 도달할 수 있도록 합니다.
    - 목적지에 도달할 수 있는지 확인하고, 도달할 수 없으면 -1을 반환합니다.

4. **결과 출력**:
    - 목적지에 도달하기 위해 필요한 최소 주유 횟수를 출력합니다.

이 과정을 통해 트럭이 최소한의 주유 횟수로 목적지에 도달할 수 있도록 합니다. 이를 통해 연료 효율성을 극대화하고 최적의 경로를 선택하는 문제를 해결할 수 있습니다.

## 코드 구현
```python
import heapq  # 우선순위 큐를 사용하기 위한 힙큐 모듈을 임포트
import sys  # 표준 입력을 사용하기 위한 시스템 모듈 임포트

input = sys.stdin.read  # 표준 입력을 한 번에 읽어오는 함수로 정의

def minimum_refuel_stops(N, stations, L, P):
    # 주유소 리스트에 도착지 정보를 추가 (도착지는 연료를 제공하지 않음)
    stations.append((L, 0))
    # 주유소를 위치 순으로 정렬
    stations.sort()

    # 최대 힙으로 사용할 리스트와 기타 변수 초기화
    max_heap = []
    refuels = 0  # 주유 횟수
    current_fuel = P  # 현재 연료량
    prev_location = 0  # 이전 위치 (시작점은 0)

    for location, fuel in stations:
        # 현재 위치까지 도달하기 위해 필요한 연료를 소모
        current_fuel -= (location - prev_location)
        # 연료가 부족할 경우, 최대 힙에서 연료를 보충
        while max_heap and current_fuel < 0:
            current_fuel += -heapq.heappop(max_heap)  # 최대 힙에서 연료를 추출하여 보충
            refuels += 1  # 주유 횟수 증가
        # 여전히 연료가 부족하면 도착할 수 없음을 의미
        if current_fuel < 0:
            return -1
        # 현재 주유소에서 얻을 수 있는 연료를 최대 힙에 추가 (음수로 추가하여 최대 힙처럼 사용)
        heapq.heappush(max_heap, -fuel)
        # 이전 위치를 현재 위치로 업데이트
        prev_location = location
    
    return refuels  # 최소 주유 횟수를 반환

# 입력 처리
data = input().split()  # 표준 입력을 공백 기준으로 나누어 리스트로 저장
N = int(data[0])  # 첫 번째 값은 주유소의 개수
stations = []
for i in range(N):
    a, b = int(data[2 * i + 1]), int(data[2 * i + 2])  # 각 주유소의 위치와 연료량
    stations.append((a, b))

L = int(data[-2])  # 마지막에서 두 번째 값은 도착지의 위치
P = int(data[-1])  # 마지막 값은 시작 시 트럭의 연료량

# 결과 출력
result = minimum_refuel_stops(N, stations, L, P)
print(result)
