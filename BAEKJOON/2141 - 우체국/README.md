# 우체국 문제 풀이 및 설명

<https://www.acmicpc.net/problem/2141>

<https://mayquartet.com/python-백준-2141-우체국/>

## 문제 이해

우체국 위치 선정 문제는 주어진 여러 마을 중에서 모든 사람들의 총 이동 거리를 최소화할 수 있는 우체국 위치를 찾는 최적화 문제입니다. 각 마을의 위치와 인구수가 주어졌을 때, 우체국을 설치했을 때 모든 주민들이 이동해야 하는 총 거리를 최소화하는 지점을 선택해야 합니다. 단순히 중앙값이 아니라, 인구수를 고려한 가중 중앙값을 찾는 것이 핵심입니다.

## 입출력 조건

### 입력 조건

- 마을의 개수 `N`은 1부터 100,000 사이의 정수입니다.
- 각 마을의 x좌표 `X[i]`는 절대값이 10억 이하의 정수입니다.
- 각 마을의 인구수 `A[i]`는 1부터 10억 사이의 정수입니다.
- 모든 입력값은 정수로 주어집니다.

### 출력 조건

- 출력은 우체국의 최종 위치 x좌표 한 개입니다.
- 최적 위치가 여러 개인 경우 가장 작은 위치를 선택해야 합니다.

입력 데이터의 범위가 매우 넓기 때문에, 효율적이고 정확한 알고리즘 설계가 중요합니다.

## 접근 방식

이 문제는 그리디 알고리즘과 중앙값(median) 개념을 결합한 접근 방식으로 해결할 수 있습니다. 핵심 아이디어는 다음과 같습니다:

1. 마을들을 x좌표 기준으로 정렬합니다.
2. 인구를 고려한 가중 중앙값을 찾습니다.
3. 전체 인구의 절반 이상을 포함하는 첫 번째 지점을 선택합니다.

시간 복잡도를 최소화하기 위해 선형 시간 알고리즘을 사용합니다.

이 접근 방식은 각 주민의 이동 거리 합을 최소화하는 최적의 우체국 위치를 효율적으로 찾을 수 있게 해줍니다.

<https://mayquartet.com/algorithm-알고리즘-greedy-그리디-알고리즘탐욕법-이해하기/>

## 풀이 과정

### 1. 입력 데이터 준비

- 마을의 개수 `N`을 입력받습니다.
- 각 마을의 x좌표와 인구수를 저장할 데이터 구조를 준비합니다.
- 입력된 마을 정보를 x좌표 기준으로 정렬합니다.

### 2. 인구 분석

- 전체 마을의 총 인구수를 계산합니다.
- 현재까지의 누적 인구를 추적할 변수를 초기화합니다.

### 3. 최적 위치 탐색

- 정렬된 마을 리스트를 순회하며 누적 인구를 계산합니다.
- 누적 인구가 전체 인구의 절반을 넘어가는 첫 번째 지점을 찾습니다.
- 해당 지점의 x좌표를 우체국 위치로 선택합니다.

### 4. 결과 출력

- 계산된 우체국 위치(x좌표)를 출력합니다.

## 알고리즘의 시간 복잡도

이 알고리즘은 **O(N log N)**의 시간 복잡도를 가지며, 정렬 이후 단 한 번의 순회로 최적의 우체국 위치를 찾아낼 수 있습니다.

## 코드 구현

```python
# 시스템 관련 입력/출력 모듈 가져오기
import sys

# 우체국 최적 위치를 찾는 함수 정의 (마을 개수와 마을 정보를 입력받음)
def find_post_office_location(N, villages):
    # 마을들을 x 좌표 기준으로 정렬
    villages.sort(key=lambda x: x[0])

    # 전체 마을 인구 계산
    total_population = sum(village[1] for village in villages)

    # 현재까지의 누적 인구 초기화
    current_population = 0

    # 정렬된 마을 리스트를 순회
    for i, (x, people) in enumerate(villages):
        # 현재 마을의 인구를 누적 인구에 추가
        current_population += people

        # 누적 인구가 전체 인구의 절반 이상이 되면
        if current_population >= (total_population + 1) // 2:
            # 해당 마을의 x 좌표를 우체국 위치로 반환
            return x

    # 예외적인 경우 첫 번째 마을의 위치 반환
    return villages[0][0]

# 마을의 개수 입력
N = int(sys.stdin.readline().strip())

# 마을 정보를 저장할 리스트 초기화
villages = []

# N개의 마을 정보 입력 받기 (x 좌표와 인구)
for _ in range(N):
    # 한 줄을 입력받아 x 좌표와 인구로 분리
    x, people = map(int, sys.stdin.readline().split())
    # 마을 정보를 리스트에 추가
    villages.append((x, people))

# 우체국 최적 위치 계산 및 출력
print(find_post_office_location(N, villages))
```
