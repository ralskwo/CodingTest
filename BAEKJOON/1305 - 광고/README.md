# 광고 문제 풀이 및 설명

<https://www.acmicpc.net/problem/1305>

<https://mayquartet.com/python-백준-1305-광고/>

## 문제 이해

이 문제는 광고판에 일정한 문자열이 반복되면서 흘러나오는 광고의 일부분을 보았을 때, 해당 광고 문자열의 가능한 최소 길이를 구하는 것입니다. 광고 문자열이 무한히 반복되기 때문에 어느 순간에 보이는 문자열만 주어지며, 이 문자열이 반복되는 가장 짧은 단위를 찾아야 합니다. 예를 들어, 주어진 문자열이 `aaba`이고 광고판의 크기가 6이라면, 첫 번째 화면에는 `aabaaa`가 보이고, 이후 매 초마다 한 문자씩 오른쪽으로 이동하며 다음과 같은 형태를 보입니다: `abaaab`, `baaaba`, 등등. 이 문제는 주어진 문자열이 특정 패턴을 반복하는 구조를 찾아 그 패턴의 길이를 최소화하는 문제입니다. 결국, 우리는 주어진 문자열이 반복될 수 있는 가장 짧은 패턴의 길이를 찾아야 합니다.

## 입출력 조건

- **입력 조건**
  - 첫 번째 줄에는 광고판의 크기를 나타내는 정수 `L`이 주어집니다. `L`은 1 이상 1,000,000 이하의 범위를 가집니다.
  - 두 번째 줄에는 현재 광고판에 보이는 문자열이 주어집니다. 이 문자열은 알파벳 소문자로만 이루어져 있으며, 길이는 `L`과 같습니다.
- **출력 조건**
  - 가능한 광고의 길이 중 가장 짧은 것을 정수 형태로 출력합니다.

## 접근 방식

이 문제를 풀기 위해서는 주어진 문자열이 반복되는 최소 패턴의 길이를 찾아야 합니다. 이를 위해 문자열의 접두사와 접미사가 일치하는 최대 길이를 찾는 데 도움을 주는 `KMP` 알고리즘의 실패 함수(failure function)를 사용합니다. 실패 함수는 문자열의 접두사와 접미사가 일치하는 최대 길이를 저장한 배열로, 이 배열을 이용해 문자열이 반복되는 구조를 파악할 수 있습니다.

`KMP` 알고리즘에서 실패 함수의 마지막 값을 통해 접두사와 접미사가 일치하는 최대 길이를 구할 수 있습니다. 주어진 문자열의 길이에서 이 값을 빼면 문자열이 반복되는 최소 단위를 찾을 수 있습니다. 이 계산 과정에서 문자열의 크기가 최대 1,000,000까지 주어지기 때문에, 시간 복잡도가 `O(n)`인 `KMP` 실패 함수 계산을 사용하는 것이 적절합니다.

## 풀이 과정

1. **실패 함수 배열 초기화**  
   먼저 `L` 크기의 실패 함수 배열 `failure`를 0으로 초기화합니다. 이 배열은 문자열 `ad`의 접두사와 접미사가 일치하는 최대 길이를 저장하는 역할을 합니다. 그리고 접두사와 접미사의 일치하는 길이를 추적할 변수 `j`를 0으로 초기화합니다.

2. **실패 함수 계산**  
   두 번째 문자부터 마지막 문자까지 순차적으로 접근하며 실패 함수 값을 계산합니다. 이 과정에서는 `while`문을 통해 `j` 값이 0보다 크고, 현재 문자 `ad[i]`와 `ad[j]`가 일치하지 않는 경우 `j` 값을 이전 실패 함수 값으로 갱신합니다. 이때 `j = failure[j - 1]`을 통해 이전에 일치했던 부분을 재참조하게 되므로 일치 길이를 효율적으로 찾을 수 있습니다.

   만약 `ad[i]`와 `ad[j]`가 일치하는 경우에는 `j`를 증가시키고, 실패 함수 배열에 `j` 값을 저장합니다. 이 과정을 반복하여 `failure[i]`에는 `ad[0:i+1]`의 접두사와 접미사가 일치하는 최대 길이가 저장됩니다.

3. **반복되는 최소 단위 계산**  
   실패 함수 계산이 끝나면, 반복되는 최소 단위를 계산할 수 있습니다. 이 값은 `L - failure[L - 1]`으로, `L`에서 실패 함수 배열의 마지막 값을 뺀 값입니다. `failure[L - 1]`은 문자열의 접두사와 접미사가 일치하는 최대 길이를 나타내므로, 이를 전체 길이 `L`에서 빼면 반복되는 최소 단위를 구할 수 있습니다.

4. **결과 반환 및 출력**  
   마지막으로 `L - failure[L - 1]`을 반환하여 가능한 광고 길이 중 가장 짧은 길이를 결과로 출력합니다.

## 코드 구현

```python
def shortest_ad_length(L, ad):
    # 실패 함수 배열 초기화, 길이가 L인 배열을 0으로 채움
    failure = [0] * L
    # 접두사와 접미사가 일치하는 최대 길이를 추적할 인덱스 j 초기화
    j = 0

    # 두 번째 문자부터 마지막 문자까지 반복하여 실패 함수 계산
    for i in range(1, L):
        # j가 0보다 크고 현재 문자가 일치하지 않을 경우, 이전 실패 함수 값을 참고하여 j 갱신
        while j > 0 and ad[i] != ad[j]:
            j = failure[j - 1]
        # 현재 문자가 일치하면, j를 증가시키고 실패 함수 배열에 j 값을 저장
        if ad[i] == ad[j]:
            j += 1
            failure[i] = j

    # 문자열의 길이 L에서 실패 함수의 마지막 값을 빼서 주기성을 나타내는 최소 광고 길이를 반환
    return L - failure[L - 1]

if __name__ == "__main__":
    # 첫 번째 줄에서 광고판 크기 L을 입력받아 정수로 변환
    L = int(input().strip())
    # 두 번째 줄에서 현재 광고판에 보이는 문자열을 입력받음
    ad = input().strip()
    # 계산된 최소 광고 길이를 출력
    print(shortest_ad_length(L, ad))
```
