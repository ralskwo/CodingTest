# 놀이 공원 문제 풀이 및 설명

<https://www.acmicpc.net/problem/1561>

<https://mayquartet.com/python-백준-1561-놀이-공원/>

## 문제 이해

이 문제는 놀이기구에 줄을 선 아이들이 차례대로 놀이기구를 타는 상황을 시뮬레이션하고, 마지막 아이가 타는 놀이기구의 번호를 찾는 것입니다.  
놀이기구는 각각 운행 시간이 다르며, 시간이 지남에 따라 빈 자리가 생기면 대기열의 첫 번째 아이가 탑승합니다.  
놀이기구의 특성상, 번호가 작은 놀이기구가 우선적으로 이용됩니다. 따라서 이 문제는 대기열 관리와 시간에 따른 상태 변화를 정확히 추적해야 합니다.

중요한 점은, 아이들의 수인 `N`이 최대 20억에 달할 수 있으므로 단순히 시뮬레이션으로 해결하기에는 시간이 너무 오래 걸립니다.  
이를 해결하기 위해 놀이기구가 몇 명의 아이를 처리할 수 있는지 계산하고, 이를 기반으로 최적의 시간과 마지막 놀이기구를 찾아야 합니다.

## 입출력 조건

### 입력 조건

1. 첫 번째 줄에는 두 정수 `N`과 `M`이 주어집니다.
   - `N`: 대기 중인 아이의 수 (1 ≤ `N` ≤ 2,000,000,000)
   - `M`: 놀이기구의 수 (1 ≤ `M` ≤ 10,000)
2. 두 번째 줄에는 `M`개의 자연수가 주어지며, 각 놀이기구의 운행 시간이 순서대로 주어집니다.
   - 각 운행 시간은 1 이상 30 이하의 자연수입니다.

### 출력 조건

1. 줄의 마지막 아이(`N`번째 아이)가 탑승한 놀이기구의 번호를 출력합니다.
2. 놀이기구 번호는 1번부터 시작합니다.

## 접근 방식

이 문제는 다음과 같은 알고리즘 및 방식을 사용하여 해결할 수 있습니다.

1. **이분 탐색**:

   - 마지막 아이가 놀이기구에 탑승할 수 있는 최소 시간을 찾기 위해 이분 탐색을 사용합니다.
   - 시간 `T`가 주어졌을 때, `T` 시간 동안 몇 명의 아이가 놀이기구를 탑승할 수 있는지를 계산하여 `N`번째 아이가 탑승할 수 있는 시간을 찾아냅니다.

2. **탑승 가능한 아이 수 계산**:

   - 주어진 시간 `T`에서 각 놀이기구는 `T // time + 1` 명의 아이를 태울 수 있습니다.
   - 모든 놀이기구에 대해 위의 값을 합산하여 총 탑승 가능한 아이 수를 구합니다.

3. **탑승한 순서를 추적**:

   - 이분 탐색을 통해 찾은 시간 `T`에 대해, `T-1` 시간까지 탑승한 아이의 수를 계산합니다.
   - 남은 아이의 수를 이용해 마지막 아이가 탑승한 놀이기구를 찾습니다.

4. **효율성 확보**:
   - `N`의 값이 매우 크므로, 모든 아이를 시뮬레이션하지 않고 수학적으로 총 탑승 수를 계산하는 방식으로 접근해야 합니다.
   - 이분 탐색을 통해 시간 범위를 좁히면서 효율적으로 해결합니다.

<https://mayquartet.com/algorithm-binary-search/>

## 풀이 과정

1. **이분 탐색을 위한 시간 범위 설정**:

   - 최소 시간은 0으로 설정합니다.
   - 최대 시간은 가장 느린 놀이기구가 모든 아이를 처리하는 경우로 계산하여 `2000000000 * 30`으로 설정합니다.

2. **탐색 중간값 계산**:

   - `mid = (left + right) // 2`로 현재 탐색 범위의 중간값을 계산합니다.

3. **탑승 가능한 아이 수 계산**:

   - `mid` 시간 동안 각 놀이기구에서 몇 명의 아이를 태울 수 있는지를 계산합니다.
   - 이를 모두 더하여 `total`을 구합니다.

4. **탑승 가능 여부 확인**:

   - `total`이 `N` 이상이면, 마지막 아이가 탑승할 가능성이 있으므로 시간을 더 줄여야 합니다. 따라서 `right = mid`로 설정합니다.
   - `total`이 `N` 미만이면, 시간이 더 필요하므로 `left = mid + 1`로 설정합니다.

5. **최소 시간 결정**:

   - 이분 탐색이 종료되면, `left`가 마지막 아이가 탑승할 수 있는 최소 시간을 나타냅니다.

6. **T-1까지 탑승한 아이 수 계산**:

   - `T-1`까지 탑승한 아이의 수를 계산하여 `total_before`에 저장합니다.
   - 이를 이용해 마지막 아이의 대기 순서를 계산합니다.

7. **남은 아이와 놀이기구 매칭**:

   - 남은 아이 수를 계산하여 `remaining = N - total_before`로 설정합니다.
   - 놀이기구를 순회하며 빈 놀이기구를 찾고, 남은 아이를 하나씩 태웁니다.
   - 마지막 아이가 태워진 놀이기구 번호를 반환합니다.

8. **결과 출력**:
   - 계산된 놀이기구 번호를 출력합니다. 놀이기구 번호는 1번부터 시작합니다.
