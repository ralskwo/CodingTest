# 특정 거리의 도시 찾기 문제 풀이 및 설명

https://www.acmicpc.net/problem/18352

## 문제 이해

이 문제는 주어진 도시들 간의 도로 연결 정보를 바탕으로, 특정 출발 도시에서 정확히 거리가 \( K \)인 모든 도시를 찾는 것입니다. 모든 도로의 거리가 동일하게 1로 주어지기 때문에, 도로의 개수가 적어도 복잡한 거리 계산이 필요하지 않습니다. 즉, 거리가 \( K \)인 도시는 출발 도시에서 \( K \)개의 도로를 거쳐 도달할 수 있는 도시입니다.

문제의 핵심은 출발 도시에서 각 도시까지의 최단 거리를 구하는 것과, 그 중에서 거리 \( K \)인 도시들을 찾는 것입니다. 만약 거리가 \( K \)인 도시가 없다면, -1을 출력해야 합니다.

## 입출력 조건

- **입력 조건**:
  1. 첫 번째 줄에 도시의 개수 \( N \), 도로의 개수 \( M \), 목표 거리 \( K \), 출발 도시 \( X \)가 공백으로 구분되어 주어집니다.
     - \( 2 \레q N \레q 300,000 \)
     - \( 1 \레q M \레q 1,000,000 \)
     - \( 1 \레q K \레q N \)
     - \( 1 \레q X \레q N \)
  2. 그 다음 \( M \)개의 줄에 걸쳐 각 도로의 정보가 주어집니다. 각 줄은 두 개의 자연수 \( A \)와 \( B \)로 구성되며, 이는 도시 \( A \)에서 도시 \( B \)로 가는 단방향 도로가 존재한다는 의미입니다.
     - \( 1 \레q A, B \레q N \)

- **출력 조건**:
  1. 출발 도시 \( X \)에서 도달할 수 있는 도시들 중에서, 최단 거리가 정확히 \( K \)인 모든 도시의 번호를 오름차순으로 출력합니다.
  2. 만약 그런 도시가 없다면, -1을 출력합니다.

## 접근 방식

이 문제는 그래프 탐색 알고리즘 중 하나인 BFS(너비 우선 탐색)를 사용하여 해결할 수 있습니다. BFS는 특정 정점에서부터 시작하여 인접한 모든 정점을 차례로 방문하는 알고리즘으로, 각 정점을 방문할 때마다 최단 거리를 1씩 증가시키며 탐색합니다. BFS를 사용하는 이유는 모든 도로의 거리가 동일한 1이기 때문에, BFS를 통해 각 도시까지의 최단 거리를 정확히 계산할 수 있기 때문입니다.

이 문제를 해결하기 위해서는 다음과 같은 순서로 접근합니다:
1. 주어진 도로 정보를 바탕으로, 도시간의 연결 상태를 표현하는 그래프를 생성합니다.
2. 출발 도시를 시작점으로 BFS를 수행하여, 각 도시까지의 최단 거리를 계산합니다.
3. 계산된 최단 거리 중에서, 정확히 \( K \)인 도시들을 찾아서 결과 리스트에 추가합니다.
4. 결과 리스트를 오름차순으로 정렬하고, 출력합니다. 만약 결과 리스트가 비어 있으면 -1을 출력합니다.

## 풀이 과정

1. **그래프 모델링**:
   - 먼저 도시들을 노드로, 도로를 간선으로 생각하여 그래프를 모델링합니다. 이때, 그래프는 인접 리스트(Adjacent List) 방식으로 표현합니다. 이는 각 도시별로 연결된 도시들을 리스트로 관리하는 방식입니다.
   - 예를 들어, 도시 1에서 도시 2로 가는 도로가 있다면, 그래프의 리스트에서 도시 1에 해당하는 부분에 도시 2를 추가합니다.

2. **최단 거리 계산**:
   - BFS를 사용하여 출발 도시 \( X \)에서부터 각 도시까지의 최단 거리를 계산합니다. 이때, 출발 도시는 자기 자신이므로 거리를 0으로 설정합니다.
   - BFS는 큐를 사용하여 구현합니다. 출발 도시를 큐에 넣고, 큐에서 하나씩 도시를 꺼내면서 해당 도시와 인접한 도시들을 방문합니다. 인접한 도시가 아직 방문되지 않았다면, 그 도시까지의 최단 거리를 현재 도시의 거리 + 1로 설정하고, 큐에 넣습니다.

3. **결과 도출**:
   - BFS가 종료되면, 모든 도시까지의 최단 거리가 계산됩니다. 이제 이 중에서 거리 \( K \)인 도시들을 찾아 리스트에 추가합니다.
   - 리스트에 추가된 도시들을 오름차순으로 정렬한 후 출력합니다. 만약 \( K \)인 도시가 없다면, -1을 출력합니다.

이와 같은 방법으로 문제를 해결할 수 있습니다. BFS는 각 도시를 최대 한 번씩만 방문하며, 모든 도로를 한 번씩만 탐색하기 때문에, 시간 복잡도는 \( O(N + M) \)로 매우 효율적입니다. 따라서 주어진 문제의 입력 제한 내에서 충분히 동작할 수 있습니다.
