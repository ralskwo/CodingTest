# 양팔 저울 문제 풀이 및 설명

<https://www.acmicpc.net/problem/2629>

<https://mayquartet.com/python-백준-2629-양팔저울/>

## 문제 이해

이 문제는 주어진 **추의 무게**와 **구슬의 무게**를 비교하여, 주어진 추만을 이용해 각 구슬의 무게를 정확히 확인할 수 있는지 판단하는 것입니다. 추를 이용해 구슬의 무게를 확인하는 방법에는 다음 세 가지가 있습니다.

1. 추를 **왼쪽**에 놓는 경우.
2. 추를 **오른쪽**에 놓는 경우.
3. 추를 **사용하지 않는** 경우.

이 세 가지 방법을 조합해 주어진 구슬의 무게와 저울이 균형을 이루는지를 판단해야 합니다. 각 구슬에 대해 확인이 가능하면 `Y`, 불가능하면 `N`을 출력해야 합니다.

이 문제를 해결하려면 추를 이용해 만들 수 있는 모든 가능한 무게를 계산하고, 구슬의 무게가 그 안에 포함되는지 확인해야 합니다. 따라서, 이 문제는 **모든 가능한 무게의 조합**을 계산하고 특정 무게가 포함되는지를 판단하는 방식으로 해결해야 합니다.

## 입출력 조건

### 입력 조건

1. 첫 번째 줄에 주어지는 정수 `n`은 추의 개수를 나타냅니다. 추의 개수는 최대 `30`개입니다.
2. 두 번째 줄에 주어지는 `n`개의 정수는 각 추의 무게를 나타냅니다. 각 추의 무게는 최대 `500`입니다.
3. 세 번째 줄에 주어지는 정수 `m`은 확인해야 할 구슬의 개수를 나타냅니다. 구슬의 개수는 최대 `7`개입니다.
4. 네 번째 줄에 주어지는 `m`개의 정수는 각 구슬의 무게를 나타냅니다. 각 구슬의 무게는 최대 `40,000`입니다.

### 출력 조건

1. 각 구슬의 무게에 대해 확인이 가능하면 `Y`, 불가능하면 `N`을 출력합니다.
2. 출력은 한 줄로 이루어지며, 각 답 사이에는 공백을 하나 둡니다.

## 접근 방식

이 문제는 추를 조합하여 가능한 모든 무게를 계산한 뒤, 각 구슬의 무게가 그 범위 안에 포함되는지를 확인하는 방식으로 해결해야 합니다. 이를 효율적으로 수행하기 위해 **동적 프로그래밍(DP)**을 활용합니다. 문제 해결을 위한 주요 아이디어는 다음과 같습니다.

1. **추를 사용하여 무게를 계산**:
   - 주어진 추의 무게를 이용해 저울에 놓을 수 있는 모든 가능한 무게를 계산합니다.
   - 저울에 추를 놓는 방식에는 왼쪽에 추가하거나, 오른쪽에 추가하거나, 사용하지 않는 세 가지 방법이 있습니다.
2. **DP 테이블 활용**:
   - 가능한 무게를 저장하기 위해 크기가 `sum(weights)`인 DP 테이블을 생성합니다.
   - `dp[x]`는 무게 `x`를 만들 수 있는지를 나타내는 Boolean 값입니다.
3. **구슬 확인**:
   - 구슬의 무게가 DP 테이블에 표시된 가능한 무게 범위에 포함되는지를 확인합니다.
   - 포함된다면 `Y`, 포함되지 않는다면 `N`을 출력합니다.

이 접근 방식은 모든 추의 무게 조합을 효율적으로 계산할 수 있으며, 구슬의 무게를 확인하는 데 필요한 시간 복잡도를 줄여줍니다.

## 풀이 과정

### 1. 입력값 처리

- 입력값을 받아 추의 개수 `n`, 추의 무게 리스트 `weights`, 구슬의 개수 `m`, 구슬의 무게 리스트 `marbles`를 저장합니다.

### 2. DP 테이블 초기화

- 추의 무게 총합을 계산하여 가능한 최대 무게 `max_weight`를 구합니다.
- 크기가 `max_weight + 1`인 DP 테이블을 생성하고, 초기값으로 모두 `False`를 설정합니다.
- 무게 `0`은 항상 만들 수 있으므로 `dp[0]`을 `True`로 설정합니다.

### 3. 추 조합으로 가능한 무게 계산

- 각 추를 순회하며 DP 테이블을 갱신합니다.
- 기존 DP 테이블을 복사하여 `current`에 저장한 후, 각 추를 왼쪽, 오른쪽, 사용하지 않는 경우를 고려해 가능한 무게를 계산합니다.
- 새로운 무게를 `current`에 반영한 뒤, `dp`를 `current`로 업데이트합니다.

### 4. 구슬 무게 확인

- 각 구슬의 무게를 순회하며 DP 테이블에서 해당 무게를 만들 수 있는지를 확인합니다.
- 무게가 가능하면 `Y`, 불가능하면 `N`을 결과 리스트에 추가합니다.

### 5. 결과 출력

- 결과 리스트를 공백으로 구분하여 한 줄로 출력합니다.

### 6. 메인 함수 실행

- 스크립트가 메인 프로그램으로 실행될 경우 `solve` 함수를 호출합니다.

## 코드 구현

```python
def solve():
    import sys
    input = sys.stdin.read
    data = input().split()

    # 첫 번째 입력값을 정수로 변환하여 추의 개수를 저장
    n = int(data[0])

    # 두 번째부터 n개의 값을 정수로 변환하여 추의 무게 리스트로 저장
    weights = list(map(int, data[1:n+1]))

    # 추 뒤에 오는 값을 정수로 변환하여 구슬의 개수를 저장
    m = int(data[n+1])

    # 구슬의 무게들을 정수로 변환하여 리스트로 저장
    marbles = list(map(int, data[n+2:]))

    # 추의 무게 총합을 계산하여 가능한 무게의 최대치를 구함
    max_weight = sum(weights)

    # 0부터 max_weight까지의 무게를 체크하기 위한 DP 테이블 생성
    dp = [False] * (max_weight + 1)

    # 무게 0은 항상 만들 수 있으므로 True로 설정
    dp[0] = True

    # 각 추에 대해 DP 테이블을 갱신
    for weight in weights:
        # 기존 DP 테이블 값을 복사하여 현재 추를 추가한 후 결과를 저장할 테이블 생성
        current = dp[:]

        # 모든 무게를 확인하며 가능한 새로운 무게를 DP 테이블에 추가
        for w in range(max_weight + 1):
            if dp[w]: # 현재 무게가 True일 때만 처리
                # 추를 왼쪽에 올렸을 때의 무게를 갱신
                if w + weight <= max_weight:
                    current[w + weight] = True
                # 추를 오른쪽에 올렸을 때의 무게를 갱신
                if abs(w - weight) <= max_weight:
                    current[abs(w - weight)] = True

        # DP 테이블을 현재 상태로 갱신
        dp = current

    # 구슬 무게 확인 결과를 저장할 리스트 생성
    result = []

    # 각 구슬의 무게를 DP 테이블에서 확인
    for marble in marbles:
        # 구슬의 무게가 DP 테이블에서 가능한 무게로 표시되어 있으면 Y 추가
        if marble <= max_weight and dp[marble]:
            result.append('Y')
        else: # 그렇지 않으면 N 추가
            result.append('N')

    # 결과 리스트를 공백으로 구분하여 출력
    print(' '.join(result))


if __name__ == "__main__":
    # 메인 함수로 실행될 때 solve 함수 호출
    solve()
```
