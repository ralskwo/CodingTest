# 개미굴 문제 풀이 및 설명

<https://www.acmicpc.net/problem/14725>

<https://mayquartet.com/python-파이썬-백준-14725-개미굴/>

## 문제 이해

이 문제는 개미굴의 구조를 시각적으로 표현하는 문제입니다. 주어진 입력은 개미들이 각 층마다 지나간 방의 먹이 정보를 나타내며, 이를 기반으로 개미굴의 트리를 구축하고, 시각적으로 표현하여 출력해야 합니다. 개미굴은 트리 형태로 이루어져 있으며, 각 층을 따라 내려가면서 더 이상 내려갈 방이 없으면 해당 위치에서 멈추는 형태로 설계됩니다.

주어진 입력을 바탕으로 개미굴의 트리 구조를 구성한 후, 이를 깊이에 따라 정렬된 형태로 출력해야 합니다. 각 층은 `--`를 이용해 깊이를 표현하고, 같은 층에 여러 방이 있을 때는 사전 순서에 따라 방의 먹이 정보를 먼저 출력해야 합니다. 즉, 입력된 정보를 이용해 트리를 생성하고, 깊이 우선 탐색(DFS)을 통해 트리를 순회하며 개미굴의 구조를 시각화하는 문제입니다.

개미굴은 루트에서부터 시작하여 각 층을 따라 내려가며 확장될 수 있으므로, 입력된 정보를 통해 트리의 노드를 하나씩 생성하며 전체 구조를 만들어 나가야 합니다. 또한, 같은 층에 있는 방들은 중복되지 않으며, 트리의 노드에 같은 이름이 반복되지 않도록 주의해야 합니다.

## 입출력 조건

1. **입력 조건**:

   - 첫 번째 줄에는 개미굴 정보를 보내온 로봇 개미의 개수 `N`이 주어집니다. (`1 ≤ N ≤ 1000`)
   - 두 번째 줄부터 `N+1` 번째 줄까지는 각 로봇 개미가 지나간 방의 먹이 정보가 주어집니다.
   - 각 줄의 첫 번째 값은 `K`로, 해당 개미가 지나간 방의 개수입니다. (`1 ≤ K ≤ 15`)
   - `K` 이후의 값들은 개미가 지나간 각 층의 방에 저장된 먹이 정보이며, 알파벳 대문자로만 이루어져 있습니다. 각 먹이 이름의 길이는 `1 ≤ t ≤ 15`입니다.

2. **출력 조건**:
   - 트리 구조를 최상위부터 출력하며, 각 층을 `--`로 구분하여 출력해야 합니다.
   - 같은 층에 여러 개의 방이 있을 때는 사전 순서대로 출력해야 합니다.
   - 같은 이름의 방이 중복되지 않도록 하며, 각 층의 방은 최대 한 번만 나와야 합니다.

## 접근 방식

이 문제는 트리 구조를 기반으로 풀이해야 하는 문제로, 트리 자료구조를 사용하여 개미굴을 구성하고, 깊이 우선 탐색(DFS) 또는 너비 우선 탐색(BFS)을 사용하여 트리의 모든 노드를 순회하며 출력해야 합니다. 이 문제를 해결하기 위해 다음과 같은 접근 방식을 사용할 수 있습니다.

1. **트리 자료구조 구성**:

   - 트리의 각 노드를 저장하기 위해 `Trie` 또는 `트리 노드` 클래스를 정의합니다.
   - 루트 노드를 생성하고, 각 개미가 보내온 먹이 정보를 바탕으로 트리를 구성합니다. 각 입력에 대해 루트 노드부터 시작하여 자식 노드를 하나씩 추가하며, 먹이 정보에 따라 트리를 확장합니다.

2. **입력값을 이용한 트리 구축**:

   - 각 입력값을 읽어와 루트 노드부터 시작하여 먹이 정보를 차례로 자식 노드로 추가합니다.
   - 이미 존재하는 노드가 있다면 해당 노드로 이동하고, 새로운 노드가 필요하다면 자식 노드를 새로 생성하여 추가합니다.
   - 자식 노드들을 사전 순서대로 정렬하여 트리를 구성합니다.

3. **트리 순회를 통한 출력**:

   - 트리를 깊이 우선 탐색(DFS) 또는 너비 우선 탐색(BFS)을 이용하여 순회하며, 각 노드를 방문할 때마다 `--`를 사용하여 깊이를 표시합니다.
   - 같은 깊이에 있는 방들은 사전 순서대로 출력해야 하므로, 출력 시 자식 노드들을 사전 순서로 정렬하여 출력합니다.

4. **출력 형식 맞추기**:
   - 각 층의 깊이를 `depth`로 계산하여 `--`를 `depth` 개수만큼 출력하고, 해당 방의 이름을 출력합니다.
   - 자식 노드를 모두 출력한 후, 깊이에 맞춰 다음 층의 방을 출력합니다.

<https://mayquartet.com/algorithm-알고리즘-trie-트라이-자료구조-이해하기/>

<https://mayquartet.com/algorithm-알고리즘-dfs-깊이-우선-탐색-알고리즘-이해하기/>

## 풀이 과정

1. **트리 노드 클래스 정의**:

   - `TrieNode` 클래스를 정의하여 각 방을 나타냅니다.
   - `children` 속성은 자식 방들을 저장하는 `defaultdict`로, 기본값으로 `TrieNode` 객체를 생성하도록 설정합니다.
   - `is_end` 속성은 현재 방이 경로의 마지막 방인지 여부를 표시하는 플래그로, 기본값은 `False`로 설정합니다.

2. **트리 구성**:

   - 입력값에서 첫 번째 줄의 `N`을 읽어와, 로봇 개미의 수를 저장합니다.
   - 각 개미의 경로 정보를 읽어와 트리를 구성합니다. 루트 노드부터 시작하여 각 층의 먹이 정보를 자식 노드로 추가합니다.
   - 자식 노드가 이미 존재할 경우 해당 자식 노드로 이동하고, 새로운 자식 노드가 필요하면 새로 생성하여 자식 노드로 추가합니다.
   - 각 층의 먹이 정보가 트리에 추가되면, 해당 경로로 이동하며 트리 구조를 완성합니다.

3. **트리 순회 및 출력**:

   - `print_trie` 함수를 정의하여 트리를 깊이 우선 탐색으로 순회합니다.
   - 각 노드를 방문할 때, 현재 깊이(`depth`)만큼 `--`를 출력하고, 해당 방의 이름을 출력합니다.
   - 자식 노드들을 `sorted`를 이용해 사전 순서대로 정렬하여 출력합니다.
   - 자식 노드를 모두 출력한 후, 다음 깊이의 노드를 출력합니다.

4. **최종 트리 출력**:
   - 루트 노드부터 `depth` 0으로 시작하여 `print_trie` 함수를 호출합니다.
   - 트리의 모든 노드를 깊이 우선 탐색하며, 입력된 정보를 시각적으로 표현하여 문제에서 요구한 형식대로 출력합니다.

## 코드 구현

```python
from collections import defaultdict  # collections 모듈에서 defaultdict 클래스 임포트

# TrieNode 클래스 정의 (트리의 각 노드를 표현)
class TrieNode:
    def __init__(self):
        # 자식 노드를 저장하기 위한 defaultdict 초기화
        self.children = defaultdict(TrieNode)
        # 해당 노드가 끝 노드인지 표시하는 플래그
        self.is_end = False

# 트리를 깊이 우선 탐색(DFS)으로 출력하는 함수
def print_trie(node, depth):
    # 자식 노드들을 사전 순서로 정렬하여 순회
    for key in sorted(node.children):
        # 현재 깊이만큼 "--"를 출력하고, 해당 노드의 key 출력
        print("--" * depth + key)
        # 자식 노드에 대해 재귀적으로 같은 방식으로 출력
        print_trie(node.children[key], depth + 1)

# 입력 개수 N을 첫 번째 줄에서 읽음
N = int(input().strip())

# 트리의 루트 노드 생성
root = TrieNode()

# N개의 입력을 읽어와 트리에 저장
for _ in range(N):
    # 입력 받은 값을 공백을 기준으로 분리하고, 첫 번째 값은 K이므로 제외한 나머지 먹이 정보만 추출
    data = list(input().strip().split())[1:]
    # 트리의 현재 위치를 루트 노드로 설정
    current_node = root
    # 먹이 정보를 하나씩 읽어가면서 트리에 추가
    for item in data:
        # 현재 위치의 자식 노드로 이동 또는 새로운 자식 노드 생성
        current_node = current_node.children[item]

# 트리의 루트 노드부터 깊이 0으로 시작하여 트리 출력
print_trie(root, 0)
```
